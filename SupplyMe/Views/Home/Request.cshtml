@{
    ViewBag.Title = "Request";
}
@model SupplyMe.Models.ItemRowPartial

<div class="container">
    <div class="row">
        <div class="request-title col-lg-12">
            WELCOME BACK, <strong>HOTEL NAME</strong>
        </div>
    </div>
    <div class="row">
        <div class="text col-lg-10">
            Please fill in the required fields in order to process your supply request and deliver to you as soon as possible
        </div>
        <div class="clear-fix"></div>
        <hr class="hr-line" />
    </div>
    <div class="row">
        <div class="request-title sub-title col-lg-12">
            <strong>SUPPLY REQUEST</strong>
        </div>
    </div>
        @using (Html.BeginForm("Request", "Home", FormMethod.Post, new { @class = "request-form" }))
        {
        <div class="row add-item">
            <div class="col-lg-12">
                <button class="pull-left" onclick="addItem();return false;"><i class="fa fa-plus"></i></button>
                <div class="pull-left">Add Another Item</div>
            </div>
        </div>
        
        <div class="row items-container">
            @Html.Partial("_ItemRowPartial", Model)
            <div class="col-lg-12">
                <textarea class="full-width" placeholder="Type your message here"></textarea>
            </div>
            <div class="col-lg-12">
                <button class="pull-right submit-btn">SUBMIT</button>
            </div>
        </div>
        }
</div>
<script>
    $("select").bselect();

    function addItem() {
        var rowid = $(".items-container div.item:first-child").attr("id");
        var rowindex = rowid.split('_')[1];

        $.ajax({
            type: "POST",
            data: { RowIndex: rowindex },
            url: "/Home/AddItemPartialView",
            success: function (result) {
                $(".items-container").prepend(result);
                $("select").bselect();
            }
        });
    }

    function removeItem(rowid) {
        $("#row_" + rowid).fadeOut("slow", function () {
            $("#row_" + rowid).remove();
        });
    }
</script>